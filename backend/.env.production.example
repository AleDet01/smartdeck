# ============================================
# üöÄ SMARTDECK PRODUCTION ENVIRONMENT
# ============================================
# Copia questo file in .env e configura i valori

# --- SERVER CONFIGURATION ---
NODE_ENV=production
PORT=3000

# --- DATABASE ---
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/smartdeck?retryWrites=true&w=majority
# Opzionale: URL replica set per high availability
# MONGODB_REPLICA_SET=rs0

# --- AUTHENTICATION ---
JWT_SECRET=CHANGE_ME_STRONG_SECRET_64_CHARS_MINIMUM_USE_openssl_rand_base64_48
SESSION_SECRET=CHANGE_ME_ANOTHER_STRONG_SECRET_64_CHARS_USE_openssl_rand_base64_48

# --- CORS ORIGINS (comma-separated) ---
ALLOW_ORIGINS=https://smartdeck-frontend.onrender.com,https://yourdomain.com

# --- OPENAI API ---
OPENAI_API_KEY=sk-proj-your-key-here
# Opzionale: Organization ID
# OPENAI_ORG_ID=org-xxxxx

# --- ERROR TRACKING (Sentry) ---
# Get from: https://sentry.io/settings/projects/
SENTRY_DSN=https://xxxxxxxxxxxxx@o0000000.ingest.sentry.io/0000000

# --- REDIS (Optional - per rate limiting distribuito) ---
# Redis migliora performance rate limiting in multi-instance deploy
# REDIS_URL=redis://username:password@redis-server:6379
# REDIS_URL=redis://localhost:6379

# --- LOGGING ---
LOG_LEVEL=info
# Options: error, warn, info, http, verbose, debug, silly

# --- RATE LIMITING ---
# Auth endpoints
AUTH_RATE_LIMIT_WINDOW=15
AUTH_RATE_LIMIT_MAX=5
# Register endpoints
REGISTER_RATE_LIMIT_WINDOW=60
REGISTER_RATE_LIMIT_MAX=3
# API endpoints
API_RATE_LIMIT_WINDOW=15
API_RATE_LIMIT_MAX=200
# AI endpoints
AI_RATE_LIMIT_WINDOW=60
AI_RATE_LIMIT_MAX=20

# --- BACKUP ---
BACKUP_DIR=/var/backups/smartdeck
# Cron schedule per backup automatico (es: ogni giorno alle 2 AM)
BACKUP_CRON=0 2 * * *

# --- EMAIL (Optional - per password recovery, notifications) ---
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# EMAIL_FROM=SmartDeck <noreply@smartdeck.com>

# --- SECURITY ---
# Cookie settings
COOKIE_SECURE=true
COOKIE_HTTPONLY=true
COOKIE_SAMESITE=strict
COOKIE_MAX_AGE=2592000000

# Account lockout
MAX_LOGIN_ATTEMPTS=10
LOCK_TIME=900000

# --- MONITORING ---
# New Relic (opzionale)
# NEW_RELIC_LICENSE_KEY=your-key
# NEW_RELIC_APP_NAME=SmartDeck-Production

# --- PERFORMANCE ---
# Connection pooling
DB_POOL_MIN=2
DB_POOL_MAX=10

# Compression
COMPRESSION_THRESHOLD=1024

# --- FEATURE FLAGS ---
ENABLE_AI_ASSISTANT=true
ENABLE_ANALYTICS=true
ENABLE_ADMIN_PANEL=false

# --- MAINTENANCE MODE ---
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=Sistema in manutenzione. Torniamo presto!

# ============================================
# üìù NOTES:
# ============================================
# 1. Genera JWT_SECRET e SESSION_SECRET con:
#    openssl rand -base64 48
#
# 2. Non committare mai questo file su Git!
#    Aggiungi .env al .gitignore
#
# 3. Per Render.com, configura env vars nel dashboard:
#    https://dashboard.render.com/
#
# 4. Testa configurazione con:
#    npm run health-check
#
# 5. Backup automatico: aggiungi cron job con:
#    npm run backup-db
# ============================================
